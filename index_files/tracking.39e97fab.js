!function(){"use strict";var e={};function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();var n=class{constructor(){t(this,"_selector",void 0),t(this,"_type",void 0),t(this,"_options",void 0),t(this,"_mappedElements",void 0),t(this,"_observer",void 0),this._options={},this._mappedElements=new Map}set selector(e){return this._selector=e,this}set type(e){return this._type=e,this}get type(){return this._type}get options(){return this._options}set options(e){return this._options=e,this}get mappedElements(){return this._mappedElements}attach(e){this._observer instanceof MutationObserver&&this._observer.disconnect(),this._observer=new MutationObserver((t=>{t.forEach((t=>{t.addedNodes.forEach((t=>{"matches"in t&&t.matches(this._selector)&&this.listen(t,e)}))}))})),this._observer.observe(document,{subtree:!0,childList:!0});document.querySelectorAll(this._selector).forEach((t=>{this.listen(t,e)}))}listen(e,t){return this}};var a=class extends n{listen(e,t){return e.addEventListener("submit",function(e){e.preventDefault(),this.mappedElements.set(e.currentTarget,!1),t(this,e.currentTarget)}.bind(this)),super.listen(e,t)}};var i=class{constructor(){this._actions=new Map}get(e){return this._actions.has(e)?this._actions.get(e):new n}remove(e){return this._actions.has(e)&&this._actions.remove(e),this}track(e,t){return t instanceof n&&(this._actions.has(e)?console.warn(e+" actions already exists... Track action has not been created!"):this._actions.set(e,t)),this}send(){return this._actions.forEach(((e,t,n)=>{e.attach(this.onSend.bind(this))})),this}};function r(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}var o=new WeakSet;class c extends i{constructor(){super(...arguments),r(this,o)}static get OPT_TIMEOUT(){return 1e3}onSend(t,n){const i=e.g._gaq;if(void 0!==i){let e={...t.options};t instanceof a&&setTimeout(function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}(this,o,s),c.OPT_TIMEOUT),console.log(`_gaq.push(["_trackEvent", "${e.event_category}", "${t.type}", "${e.event_label}", "${e.value}", "${e.non_interaction}"])`),i.push(["_trackEvent",e.event_category,t.type,e.event_label,e.value,e.non_interaction])}return this}}function s(e,t){e.mappedElements.has(t)&&e.mappedElements.get(t)||(e.mappedElements.set(t,!0),t.submit())}var l=c;function _(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function u(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var h=new WeakSet,d=new WeakSet,g=new WeakSet;class p extends i{constructor(){super(...arguments),_(this,g),_(this,d),_(this,h)}static get OPT_TIMEOUT(){return 1e3}onSend(t,n){const i=e.g.ga;if(void 0!==i){let r=u(this,h,v).call(this,t);t instanceof a&&(setTimeout(u(this,g,f),p.OPT_TIMEOUT),r.hitCallback=()=>{u(this,g,f).call(this,t,n)}),console.log(`ga("send", ${e.g.JSON.stringify(r,((e,t)=>"function"==typeof t?"function":t))})`),i("send",r)}return this}}function v(e){let t={...e.options},n={hitType:"event",eventAction:e.type,eventCategory:t.event_category,eventLabel:t.event_label};return delete t.event_category,delete t.event_label,Object.keys(t).forEach((e=>{n[u(this,d,m).call(this,e)]=t[e]})),Object.keys(n).forEach((e=>{void 0===n[e]&&delete n[e]})),n}function m(e){return e.replace(/([-_][a-z])/gi,(e=>e.toUpperCase().replace("-","").replace("_","")))}function f(e,t){e.mappedElements.has(t)&&e.mappedElements.get(t)||(e.mappedElements.set(t,!0),t.submit())}var b=p;function k(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}function w(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}var y=new WeakSet;class E extends i{constructor(){super(...arguments),k(this,y)}static get OPT_TIMEOUT(){return 1e3}onSend(t,n){const i=e.g.gtag;if(void 0!==i){let r={...t.options};t instanceof a&&(setTimeout(w(this,y,T),E.OPT_TIMEOUT),r.event_callback=()=>{w(this,y,T).call(this,t,n)}),console.log(`gtag("event", "${t.type}", ${e.g.JSON.stringify(r,((e,t)=>"function"==typeof t?"function":t))})`),i("event",t.type,r)}return this}}function T(e,t){e.mappedElements.has(t)&&e.mappedElements.get(t)||(e.mappedElements.set(t,!0),t.submit())}var S=E;function A(e,t){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.add(e)}var x=new WeakSet;class M extends i{constructor(){super(...arguments),A(this,x)}static get OPT_TIMEOUT(){return 100}onSend(t,n){const i=e.g.fbq;if(void 0!==i){let n={...t.options};t instanceof a&&setTimeout(function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}(this,x,O),M.OPT_TIMEOUT),console.log(`fbq("track", "${t.type}", ${e.g.JSON.stringify(n,((e,t)=>"function"==typeof t?"function":t))})`),i("track",t.type,n)}return this}}function O(e,t){e.mappedElements.has(t)&&e.mappedElements.get(t)||(e.mappedElements.set(t,!0),t.submit())}var C=M;var j=class{constructor(){this._trackers=new Map}register(e,t){return this.hasTracker(e)||this._trackers.set(e,t),this}addTracker(e,t){return this._trackers.set(e,t),this}removeTracker(e){return this._trackers.delete(e),this}getTracker(e){return this._trackers.get(e)}hasTracker(e){return this._trackers.has(e)}track(e,t){return t instanceof n&&this._trackers.forEach(((n,a,i)=>{n.track(e,t)})),this}observe(){this._trackers.forEach(((e,t,n)=>{e.send()}))}};var P=class{constructor(){var e,t,n;n=void 0,(t="_action")in(e=this)?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,this.reset()}get action(){return this._action}create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.reset(),this._action.selector=e,this._action.type=t,this._action.options=n,this}};var $=class extends n{listen(e,t){return e.addEventListener("click",function(n){this.mappedElements.set(e,!1),t(this,n.currentTarget)}.bind(this)),super.listen(e,t)}};var U=class extends P{reset(){return this._action=new $,this}};var L=class extends n{listen(e,t){return this.mappedElements.set(e,!1),t(this,e),super.listen(e,t)}};var R=class extends P{reset(){return this._action=new L,this}};var N=class extends P{reset(){return this._action=new a,this}};function I(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function W(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,z(e,t,"set"),n),n}function z(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var q=new WeakMap;var H=class{constructor(){I(this,q,{writable:!0,value:void 0})}set builder(e){W(this,q,e)}create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var a,i;return(a=this,i=q,function(e,t){return t.get?t.get.call(e):t.value}(a,z(a,i,"get"))).create(e,t,n),this}};var J=class extends n{set selector(e){return this._selector=e,this}get selector(){let t=this._selector||e.g.location.href;return~t.indexOf("__CURRENT_PATHNAME__")&&(t=t.replace("__CURRENT_PATHNAME__",e.g.location.pathname)),~t.indexOf("__CURRENT_SEARCH__")&&(t=t.replace("__CURRENT_SEARCH__",e.g.location.search)),t}attach(t){const n=e.g.location.pathname+e.g.location.search,a=this.selectedUrl;~n.search(new RegExp(this.selector))&&this.listen(a,t)}listen(e,t){return this.mappedElements.set(e,!1),t(this,e),super.listen(e,t)}};var D=class extends P{reset(){return this._action=new J,this}};function F(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function K(e,t){return function(e,t){if(t.get)return t.get.call(e);return t.value}(e,G(e,t,"get"))}function B(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,G(e,t,"set"),n),n}function G(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var Q=new WeakMap;var V=class{constructor(){F(this,Q,{writable:!0,value:void 0}),B(this,Q,new H)}buildLoadAction(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=new R;return K(this,Q).builder=a,K(this,Q).create(e,t,n),a.action}buildClickAction(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=new U;return K(this,Q).builder=a,K(this,Q).create(e,t,n),a.action}buildSubmitAction(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=new N;return K(this,Q).builder=a,K(this,Q).create(e,t,n),a.action}buildPageAction(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=new D;return K(this,Q).builder=a,K(this,Q).create(e,t,n),a.action}};const X=new V,Y=new j;Y.register("google_legacy",new l),Y.register("google_analytics",new b),Y.register("universal_analytics",new S),Y.register("meta_pixel",new C);const Z=e.g.Mojo;Z.ready.then((()=>{Z.container.register("action_manager",X),Z.container.register("tracker_manager",Y),function(){const t=e.g.Mojo.service("action_manager"),n=e.g.Mojo.service("tracker_manager");n.track("tel_agence",t.buildClickAction('.page_agences a[href^="tel:"]',"tel_agence",{event_label:"Click tel company",event_category:"lead_tracking"})),n.track("tel_agence_detail",t.buildClickAction('body:not(.page_agences) .agence-infos a[href^="tel:"]',"tel_agence",{event_label:"Click tel company",event_category:"lead_tracking"})),n.track("mail_agence",t.buildClickAction('.page_agences a[href^="mailto:"]',"mail_agence",{event_label:"Click mail company",event_category:"lead_tracking"}))}(),function(){const t=e.g.Mojo.service("action_manager"),n=e.g.Mojo.service("tracker_manager");n.track("form_contact",t.buildPageAction("^\\/catalog\\/contact_us\\.php(?:(?!(form|product_id|manufacturer_id|products_id|manufacturers_id)=[\\d]+).)*$","form_contact",{event_label:"Show contact form",event_category:"lead_tracking"})),n.track("form_contact_registration",t.buildPageAction("^\\/catalog\\/contact_us_success\\.php(?:(?!(form|product_id|manufacturer_id|products_id|manufacturers_id)=[\\d]+).)*$","form_contact_conversion",{event_label:"Submit contact form",event_category:"lead_tracking"}))}(),function(){const t=e.g.Mojo.service("action_manager"),n=e.g.Mojo.service("tracker_manager");n.track("form_contact_annexe",t.buildPageAction("^\\/catalog\\/contact_us\\.php.*form=[\\d]+","form_contact_annexe",{event_label:"Show annex contact form",event_category:"lead_tracking"})),n.track("form_contact_annexe_registration",t.buildPageAction("^\\/catalog\\/contact_us_success\\.php.*form=[\\d]+","form_contact_annexe_conversion",{event_label:"Submit annex contact form",event_category:"lead_tracking"}))}(),function(){const t=e.g.Mojo.service("action_manager"),n=e.g.Mojo.service("tracker_manager");n.track("avis_valeur",t.buildPageAction("^\\/catalog\\/estimation\\.php$","avis_valeur",{event_label:"Show notice of value form",event_category:"lead_tracking"})),n.track("avis_valeur_step_1",t.buildPageAction("^\\/catalog\\/estimation\\.php.*action=first$","avis_valeur_step_1",{event_label:"Show notice of value form (Step 1)",event_category:"lead_tracking"})),n.track("avis_valeur_conversion",t.buildLoadAction(".page_estimation.step2 .title_estimation","avis_valeur_conversion",{event_label:"Show notice of value form conversion",event_category:"lead_tracking"})),n.track("estimation_en_ligne",t.buildPageAction("^\\/catalog\\/estimation_en_ligne\\.php$","estimation_en_ligne",{event_label:"Show estimation form",event_category:"lead_tracking"})),n.track("estimation_en_ligne_step_2",t.buildLoadAction("#estim_online .box-estim-2","estimation_en_ligne_step_2",{event_label:"Show estimation form (Step 2)",event_category:"lead_tracking"})),n.track("estimation_en_ligne_step_3",t.buildLoadAction('#estim_online *[class*="box-estim-3"]',"estimation_en_ligne_step_3",{event_label:"Show estimation form (Step 3)",event_category:"lead_tracking"})),n.track("estimation_en_ligne_step_4",t.buildLoadAction('#estim_online *[class*="box-estim-4"]',"estimation_en_ligne_step_4",{event_label:"Show estimation form (Step 4)",event_category:"lead_tracking"})),n.track("estimation_en_ligne_step_5",t.buildLoadAction('#estim_online *[class*="box-estim-5"]',"estimation_en_ligne_step_5",{event_label:"Show estimation form (Step 5)",event_category:"lead_tracking"})),n.track("estimation_en_ligne_conversion",t.buildLoadAction("#estim_online .box-estim-6","estimation_en_ligne_conversion",{event_label:"Show estimation form conversion",event_category:"lead_tracking"}))}(),function(){const t=e.g.Mojo.service("action_manager"),n=e.g.Mojo.service("tracker_manager");n.track("contact_fiche_agence",t.buildClickAction(".page_products_info .vcard-agence .btn","contact_fiche_agence",{event_label:"Click product company contact",event_category:"lead_tracking"})),n.track("contact_fiche_agence_form",t.buildPageAction("^\\/catalog\\/contact_us\\.php.*(?:manufacturer_id|products_id)=[\\d]+.*(?:manufacturer_id|products_id)=[\\d]+","contact_fiche_agence_form",{event_label:"Show product company contact",event_category:"lead_tracking"})),n.track("contact_fiche_agence_form_conversion",t.buildPageAction("^\\/catalog\\/contact_us_success\\.php.*(?:manufacturers_id|product_id)=[\\d]+.*(?:manufacturers_id|product_id)=[\\d]+","contact_fiche_agence_form_conversion",{event_label:"Submit product company contact",event_category:"lead_tracking"})),n.track("contact_fiche",t.buildLoadAction(".page_products_info #item_form","contact_fiche",{event_label:"Show product contact",event_category:"lead_tracking"})),n.track("contact_fiche_conversion",t.buildLoadAction(".page_products_info #item_form .messageOK","contact_fiche_conversion",{event_label:"Submit product contact",event_category:"lead_tracking"})),n.track("tel_fiche",t.buildClickAction('.page_products_info a[href^="tel:"]',"tel_fiche",{event_label:"Click tel product contact",event_category:"lead_tracking"}))}(),Y.observe()}))}();