!function(){"use strict";var t={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let e;const n=new Uint8Array(16);function i(){if(!e&&(e="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!e))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return e(n)}const s=[];for(let t=0;t<256;++t)s.push((t+256).toString(16).slice(1));function a(t,e=0){return(s[t[e+0]]+s[t[e+1]]+s[t[e+2]]+s[t[e+3]]+"-"+s[t[e+4]]+s[t[e+5]]+"-"+s[t[e+6]]+s[t[e+7]]+"-"+s[t[e+8]]+s[t[e+9]]+"-"+s[t[e+10]]+s[t[e+11]]+s[t[e+12]]+s[t[e+13]]+s[t[e+14]]+s[t[e+15]]).toLowerCase()}var r=function(e,n,s){if(t.randomUUID&&!n&&!e)return t.randomUUID();const r=(e=e||{}).random||(e.rng||i)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,n){s=s||0;for(let t=0;t<16;++t)n[s+t]=r[t];return n}return a(r)};function o(t,e){l(t,e),e.add(t)}function d(t,e,n){l(t,e),e.set(t,n)}function l(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function h(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function c(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,b(t,e,"get"))}function u(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,b(t,e,"set"),n),n}function b(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var w=new WeakMap,f=new WeakMap,g=new WeakSet,v=new WeakSet;function m(t){t.detail.element.id==c(this,f).element.id&&this.hide()}function p(t){t.detail.element.id==c(this,f).element.id&&this.show()}var E=class{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(o(this,v),o(this,g),d(this,w,{writable:!0,value:void 0}),d(this,f,{writable:!0,value:void 0}),!(t instanceof HTMLElement))throw"element is not an HTMLElement";u(this,w,t),this.tab=e,this.attach()}get element(){return c(this,w)}get tab(){return c(this,f)}set tab(t){return t instanceof j&&u(this,f,t),this}get isShow(){return c(this,w).classList.contains("debugkit__tabcontent--show")}show(){return c(this,w).classList.remove("debugkit__tabcontent--hide"),c(this,w).classList.add("debugkit__tabcontent--show"),window.dispatchEvent(new CustomEvent("debugkit:tabcontent:show",{detail:this.element})),this}hide(){return c(this,w).classList.add("debugkit__tabcontent--hide"),c(this,w).classList.remove("debugkit__tabcontent--show"),window.dispatchEvent(new CustomEvent("debugkit:tabcontent:hide",{detail:this.element})),this}toggle(){return this.isShow?this.disable():this.enable()}attach(){window.addEventListener("debugkit:tab:enable",h(this,v,p).bind(this)),window.addEventListener("debugkit:tab:disable",h(this,g,m).bind(this))}detach(){window.removeEventListener("debugkit:tab:enable",h(this,v,p).bind(this)),window.removeEventListener("debugkit:tab:disable",h(this,g,m).bind(this))}};function k(t,e){L(t,e),e.add(t)}function L(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function y(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function T(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,M(t,e,"set"),n),n}function _(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,M(t,e,"get"))}function M(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var C=new WeakMap,S=new WeakSet,W=new WeakSet;function H(){if(_(this,C).dataset.hasOwnProperty("kit")){const t=document.getElementById(_(this,C).dataset.kit);t instanceof HTMLElement&&new E(t,this)}return this}function U(t){t.preventDefault(),this.toggle()}var j=class{constructor(t){var e,n,i;if(k(this,W),k(this,S),i={writable:!0,value:void 0},L(e=this,n=C),n.set(e,i),!(t instanceof HTMLElement))throw"element is not an HTMLElement";T(this,C,t),y(this,S,H).call(this),this.attach()}get element(){return _(this,C)}get id(){return _(this,C).id}get isEnable(){return _(this,C).classList.contains("debugkit__tab--enable")}enable(){return _(this,C).classList.remove("debugkit__tab--disable"),_(this,C).classList.add("debugkit__tab--enable"),window.dispatchEvent(new CustomEvent("debugkit:tab:enable",{detail:this})),this}disable(){return _(this,C).classList.add("debugkit__tab--disable"),_(this,C).classList.remove("debugkit__tab--enable"),window.dispatchEvent(new CustomEvent("debugkit:tab:disable",{detail:this})),this}toggle(){return this.isEnable?this.disable():this.enable()}attach(){_(this,C).addEventListener("click",y(this,W,U).bind(this))}detach(){_(this,C).removeEventListener("click",y(this,W,U).bind(this))}};function A(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function D(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function I(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,q(t,e,"get"))}function z(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,q(t,e,"set"),n),n}function q(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var O=new WeakMap,R=new WeakSet;function V(){window.dispatchEvent(new CustomEvent("debugkit:toggler:click",{detail:this.element}))}var B=class{constructor(t){var e,n;if(A(e=this,n=R),n.add(e),function(t,e,n){A(t,e),e.set(t,n)}(this,O,{writable:!0,value:void 0}),!(t instanceof HTMLElement))throw"element is not an HTMLElement";z(this,O,t),this.attach()}get element(){return I(this,O)}attach(){I(this,O).addEventListener("click",D(this,R,V).bind(this))}detach(){I(this,O).removeEventListener("click",D(this,R,V).bind(this))}};function F(t,e){P(t,e),e.add(t)}function x(t,e,n){P(t,e),e.set(t,n)}function P(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function G(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function J(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,N(t,e,"set"),n),n}function K(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,N(t,e,"get"))}function N(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}var Q=new WeakMap,X=new WeakMap,Y=new WeakMap,Z=new WeakSet,$=new WeakSet,tt=new WeakSet;function et(){return K(this,Q).querySelectorAll(".debugkit__tab").forEach((t=>{const e=t.id||r();t.setAttribute("id",e),K(this,Y).set(e,new j(t))})),this}function nt(t){K(this,Y).forEach((e=>{e.element.id!=t.detail.element.id&&e.disable()}))}function it(t){Array.from(K(this,Y).values()).filter((t=>t.isEnable)).length||window.dispatchEvent(new CustomEvent("debugkit:tabs:disable",{detail:this}))}var st=class{constructor(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(F(this,tt),F(this,$),F(this,Z),x(this,Q,{writable:!0,value:void 0}),x(this,X,{writable:!0,value:void 0}),x(this,Y,{writable:!0,value:void 0}),!(t instanceof HTMLElement))throw"root is not an HTMLElement";J(this,Q,t),J(this,Y,new Map),J(this,X,new Map),G(this,Z,et).call(this),this.attach(),e instanceof HTMLElement&&this.addToggler(e)}get container(){return K(this,Q)}get isOpen(){return K(this,Q).classList.contains("debugkit--opened")}addToggler(t){if(t instanceof B){t.element.id;K(this,X).set(id,t)}if(t instanceof HTMLElement){const e=t.id||r();t.setAttribute("id",e),K(this,X).set(new B(t))}return this}removeToggler(t){if(t instanceof B&&(t=toggler.element.id),t instanceof HTMLElement){const e=t.id||r();if(K(this,X).has(e)){K(this,X).get(e).detach(),K(this,X).delete(e)}}return this}enable(t){return K(this,Y).has(t)&&K(this,Y).get(t).enable(),this}disable(t){return K(this,Y).has(t)&&K(this,Y).get(t).disable(),this}open(){return K(this,Q).classList.remove("debugkit--closed"),K(this,Q).classList.add("debugkit--opened"),window.dispatchEvent(new CustomEvent("debugkit:open",{detail:this})),this}close(){return K(this,Q).classList.add("debugkit--closed"),K(this,Q).classList.remove("debugkit--opened"),window.dispatchEvent(new CustomEvent("debugkit:close",{detail:this})),this}toggle(){return this.isOpen?this.close():this.open()}attach(){window.addEventListener("debugkit:toggler:click",this.toggle.bind(this)),window.addEventListener("debugkit:tab:enable",G(this,$,nt).bind(this)),window.addEventListener("debugkit:tab:disable",G(this,tt,it).bind(this))}detach(){window.removeEventListener("debugkit:toggler:click",this.toggle.bind(this)),window.addEventListener("debugkit:tab:enable",G(this,$,nt).bind(this)),window.addEventListener("debugkit:tab:disable",G(this,tt,it).bind(this))}};function at(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")}function rt(t,e,n){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return n}function ot(t,e){return function(t,e){if(e.get)return e.get.call(t);return e.value}(t,lt(t,e,"get"))}function dt(t,e,n){return function(t,e,n){if(e.set)e.set.call(t,n);else{if(!e.writable)throw new TypeError("attempted to set read only private field");e.value=n}}(t,lt(t,e,"set"),n),n}function lt(t,e,n){if(!e.has(t))throw new TypeError("attempted to "+n+" private field on non-instance");return e.get(t)}const ht=globalThis.Mojo;var ct=new WeakMap,ut=new WeakSet;function bt(t){t.preventDefault(),this.trash().then((t=>{if(200===t.status)return window.dispatchEvent(new CustomEvent("debugkit:trash:complete")),t.blob();throw new Error("Something went wrong when trash cache!")})).catch((t=>{ht.service("messenger").addFlash("Cache was cleared!")}))}var wt=class{constructor(t){var e,n;if(at(e=this,n=ut),n.add(e),function(t,e,n){at(t,e),e.set(t,n)}(this,ct,{writable:!0,value:void 0}),!(t instanceof HTMLElement))throw"element is not an HTMLElement";dt(this,ct,t),this.attach()}get element(){return ot(this,ct)}trash(){return ht.fetchAjax("remove_all_cache")}attach(){ot(this,ct).addEventListener("click",rt(this,ut,bt).bind(this))}detach(){ot(this,ct).removeEventListener("click",rt(this,ut,bt).bind(this))}};const ft=globalThis.Mojo;ft.ready.then((()=>{const t=document.getElementById("debug-kit");if(t){const e=t.querySelector(".debugkit__toggler"),n=new st(t,e);ft.container.register("debug_kit",n)}document.querySelectorAll(".debugkit__action--trashcache").forEach((t=>{new wt(t)}))})),globalThis.addEventListener("debugkit:open",(()=>{[document.documentElement,document.body].forEach((t=>{t.classList.add("debugkit-opened"),t.classList.remove("debugkit-closed")}))})),globalThis.addEventListener("debugkit:close",(()=>{[document.documentElement,document.body].forEach((t=>{t.classList.add("debugkit-closed"),t.classList.remove("debugkit-opened")}))})),globalThis.addEventListener("debugkit:tabcontent:show",(()=>{[document.documentElement,document.body].forEach((t=>{t.classList.add("debugkit-tabcontent-show"),t.classList.remove("debugkit-tabcontent-hide")}))})),globalThis.addEventListener("debugkit:tabs:disable",(()=>{[document.documentElement,document.body].forEach((t=>{t.classList.add("debugkit-tabcontent-hide"),t.classList.remove("debugkit-tabcontent-show")}))})),globalThis.addEventListener("debugkit:trash:complete",(()=>{ft.service("messenger").addFlash("Cache was cleared!").then((()=>{globalThis.location.reload()}))}))}();